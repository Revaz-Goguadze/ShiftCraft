<!--
Generated by Claude Code Documentation Organizer
Created: 2025-08-17T16:42:41.570465
Session: 20250817_164241
Type: workflow_documentation
-->

{"session_id":"c9f37bdf-cae0-49f8-ac76-60c632a1bc71","transcript_path":"/home/coder/.claude/projects/-home-coder-epam-shiftcraft/c9f37bdf-cae0-49f8-ac76-60c632a1bc71.jsonl","cwd":"/home/coder/epam/shiftcraft","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"/home/coder/epam/shiftcraft/docs/stage2.md","old_string":"nice, let's lock down Stage 2 for your ShiftCraft project. Below is a complete, ready to submit write-up you can paste into your doc or pdf. It covers full functional and non-functional requirements, a cohesive use case model, and explicit objects, classes, and relationships. I also included CRC cards and text UML so you have optional extras.\n\n# Stage 2. Capstone Project Use Cases","new_string":"# ShiftCraft - Stage 2 Use Cases and Requirements"},"tool_response":{"filePath":"/home/coder/epam/shiftcraft/docs/stage2.md","oldString":"nice, let’s lock down Stage 2 for your ShiftCraft project. Below is a complete, ready to submit write-up you can paste into your doc or pdf. It covers full functional and non-functional requirements, a cohesive use case model, and explicit objects, classes, and relationships. I also included CRC cards and text UML so you have optional extras.\n\n# Stage 2. Capstone Project Use Cases","newString":"# ShiftCraft - Stage 2 Use Cases and Requirements","originalFile":"nice, let’s lock down Stage 2 for your ShiftCraft project. Below is a complete, ready to submit write-up you can paste into your doc or pdf. It covers full functional and non-functional requirements, a cohesive use case model, and explicit objects, classes, and relationships. I also included CRC cards and text UML so you have optional extras.\n\n# Stage 2. Capstone Project Use Cases\n\nSystem: ShiftCraft — staff scheduling and time management for small clinics and labs\n\n## 1. System overview\n\nShiftCraft helps small healthcare teams plan legal rosters, handle swap and leave requests, and produce auditable timesheets for payroll. Primary roles are Manager and Staff. Secondary roles are Finance and Admin.\n\n## 2. Stakeholders and actors\n\nActors\n• Staff: clinical or support staff who receive shift assignments, request leaves, and propose swaps\n• Manager: plans schedules, approves swaps and leaves, publishes rosters\n• Finance: exports and reviews timesheets\n• Admin: configures master data, skills, and rules\n• External Mailer or Push Service: receives notification events\n\n## 3. Functional requirements\n\nLegend FR-X with short title\n\nAuthentication and access\nFR-1 User registration with role assignment by Admin\nFR-2 Login with JWT\nFR-3 Role based access control for Manager, Staff, Finance, Admin\n\nMaster data and rules\nFR-4 Manage Skills list create read update delete\nFR-5 Manage Roles and role to permission mappings\nFR-6 Configure scheduling rules minimum rest hours, max weekly hours, required skills per shift template, location constraints\nFR-7 Manage locations and shift templates start time, end time, role, required skills, location\n\nScheduling\nFR-8 Create weekly schedule draft from templates\nFR-9 Assign staff to draft shifts with real time rule validation\nFR-10 Publish schedule to make it visible and immutable except via controlled changes\nFR-11 View schedules by week, staff, or location\n\nLeave and availability\nFR-12 Staff submit leave requests with type vacation sick unpaid\nFR-13 Manager approves or rejects leave requests with reason\nFR-14 Approved leave auto blocks conflicting assignments\nFR-15 Staff set personal availability preferences soft constraints\n\nSwaps and adjustments\nFR-16 Staff propose swap for an assigned shift to a target staff\nFR-17 Target staff accepts or declines\nFR-18 Manager final approval with automatic revalidation of rules\nFR-19 Track full audit of swap lifecycle\n\nTimesheets and payroll\nFR-20 Generate timesheets per staff and pay period including regular hours overtime and allowances\nFR-21 Export timesheets as CSV\nFR-22 Finance marks export batches as reviewed\n\nNotifications\nFR-23 Notify Staff on new assignment, swap proposal, approval or rejection\nFR-24 Notify Manager on pending approvals\nFR-25 Notification delivery via email webhook\n\nAudit and reporting\nFR-26 Record AuditEvent for changes and approvals\nFR-27 View audit log by entity or date range\n\nOps and administration\nFR-28 Seed sample data for demo environments\nFR-29 Health endpoints for liveness and readiness\n\n## 4. Non-functional requirements\n\nSecurity and privacy\nNFR-1 JWT based auth with rotating signing key\nNFR-2 Enforce least privilege per role\nNFR-3 Encrypt secrets in transit TLS and at rest via DB native encryption where available\nNFR-4 Audit trail is append only and immutable to non Admin roles\n\nReliability and availability\nNFR-5 Zero data loss for committed transactions\nNFR-6 Graceful recovery on service restart with idempotent message delivery to the notifier\n\nPerformance and scalability\nNFR-7 Schedule view renders under 500 ms P95 for a week with up to 200 staff\nNFR-8 Timesheet generation completes under 10 s for a team of up to 200 staff per period\n\nUsability\nNFR-9 Calendar supports week and person views and keyboard navigation\nNFR-10 Validation messages are human readable showing which rule failed\n\nCompliance and retention\nNFR-11 Keep audit records for minimum 3 years configurable\nNFR-12 Time zone aware storage and presentation ISO 8601 with clinic time zone context\n\nObservability and testability\nNFR-13 Structured logs with correlation ids\nNFR-14 80 percent line coverage in core business rules\nNFR-15 Testcontainers based integration tests for DB interactions\n\n## 5. Use case model\n\n### 5.1 Use case list mapped to actors\n\nUC-01 Register user Admin\nUC-02 Login User\nUC-03 Manage skills Admin\nUC-04 Configure scheduling rules Admin\nUC-05 Create weekly schedule draft Manager\nUC-06 Assign staff to shifts Manager\nUC-07 Publish schedule Manager\nUC-08 View my schedule Staff\nUC-09 Request leave Staff\nUC-10 Approve or reject leave Manager\nUC-11 Propose swap Staff initiator\nUC-12 Respond to swap Staff target\nUC-13 Approve swap Manager\nUC-14 Generate timesheets Finance or Manager\nUC-15 Export timesheets Finance\nUC-16 View audit log Admin or Manager\nUC-17 Receive notifications External Mailer or Push\n\n### 5.2 Detailed use case specifications\n\n#### UC-05 Create weekly schedule draft\n\nPrimary actor Manager\nPreconditions Manager authenticated, rules and templates exist\nMain flow\n1 Manager selects week and location\n2 System loads shift templates and known leaves for that period\n3 Manager creates draft schedule auto populating from templates\n4 System validates rules and flags conflicts\n5 Manager saves draft\nPostconditions Draft schedule exists with zero or more conflicts flagged\nAlternate flows\nA1 No templates configured System shows empty draft and suggests creating templates FR-7\nA2 Conflicts detected Conflicts listed on screen and saved as warnings FR-6\n\n#### UC-06 Assign staff to shifts\n\nPrimary actor Manager\nPreconditions Draft schedule created, staff exist\nMain flow\n1 Manager selects a draft shift\n2 Manager searches staff by role and skill\n3 System filters eligible staff and checks leaves and availability\n4 Manager assigns staff\n5 System runs rule validation min rest, weekly max hours, required skills\n6 On pass system records assignment and marks shift as assigned\nPostconditions Shift assigned and view shows updated roster\nAlternate flows\nA1 Validation fails System shows specific failed rule and prevents assignment FR-6\nA2 Staff double booked System suggests other candidates\n\n#### UC-07 Publish schedule\n\nPrimary actor Manager\nPreconditions All hard conflicts resolved\nMain flow\n1 Manager clicks Publish for the week\n2 System locks assignments and emits notifications to Staff FR-23\nPostconditions Schedule state published, further changes require swap or manager edit with audit\n\n#### UC-09 Request leave\n\nPrimary actor Staff\nPreconditions Staff authenticated\nMain flow\n1 Staff opens Leave page and selects dates, type, comment\n2 System checks overlap with published shifts and warns if conflicts\n3 Staff submits request\n4 System records LeaveRequest status pending and notifies Manager FR-24\nPostconditions Pending leave created\nAlternate flows\nA1 Dates touch published shifts Warning shown but submission allowed; final decision by Manager\nA2 Validation failure invalid range System shows error\n\n#### UC-10 Approve or reject leave\n\nPrimary actor Manager\nPreconditions Pending leave exists\nMain flow\n1 Manager opens Pending approvals\n2 Manager reviews request details and conflicts\n3 Manager approves or rejects with reason\n4 On approval system updates status approved, blocks conflicting future assignments, and notifies Staff FR-23\nPostconditions Leave finalized and schedule recalculated where needed\n\n#### UC-11 Propose swap\n\nPrimary actor Staff initiator\nPreconditions Staff has an assigned shift in future and schedule is published\nMain flow\n1 Staff selects a shift to swap and a target staff\n2 System verifies target eligibility role skill rest rules\n3 System creates SwapRequest status proposed and notifies target FR-23\nPostconditions Swap awaiting target response\nAlternate flows\nA1 Target not eligible System disallows and explains failed rule\nA2 Multiple candidates Initiator can select any eligible peer\n\n#### UC-12 Respond to swap\n\nPrimary actor Staff target\nPreconditions Swap in proposed state\nMain flow\n1 Target reviews proposal\n2 Target accepts or declines\n3 On accept system advances status to awaiting manager approval and notifies Manager FR-24\nPostconditions Awaiting approval\n\n#### UC-13 Approve swap\n\nPrimary actor Manager\nPreconditions Swap accepted by target\nMain flow\n1 Manager reviews swap and any downstream effects\n2 System revalidates rules on resulting schedule\n3 Manager approves\n4 System swaps assignees, updates audit log, and notifies both Staff\nPostconditions Schedule updated with audit entry\n\n#### UC-14 Generate timesheets\n\nPrimary actor Finance or Manager\nPreconditions Pay period boundaries defined\nMain flow\n1 Actor selects period and optional staff filter\n2 System aggregates assignments and applied leaves\n3 System calculates regular and overtime hours per rules\n4 System stores Timesheet and shows summary\nPostconditions Timesheets available for export\n\n#### UC-15 Export timesheets\n\nPrimary actor Finance\nPreconditions Generated timesheets exist\nMain flow\n1 Finance selects period and clicks Export\n2 System produces CSV and marks batch reviewed\nPostconditions CSV downloaded and review record stored\n\n### 5.3 Use case to requirement traceability matrix\n\nUC-05 FR-8 FR-6\nUC-06 FR-9 FR-6\nUC-07 FR-10 FR-23\nUC-09 FR-12\nUC-10 FR-13 FR-14\nUC-11 FR-16\nUC-12 FR-17\nUC-13 FR-18 FR-26\nUC-14 FR-20\nUC-15 FR-21 FR-22\n\n## 6. Objects, classes, and relationships\n\n### 6.1 Key domain classes with attributes\n\nUser id, name, email, roles, skills\nRole id, name, permissions\nSkill id, name\nLocation id, name, timezone\nShiftTemplate id, roleId, requiredSkillIds, startTime, endTime, locationId\nShiftInstance id, templateId, date, assigneeId optional, status Draft Assigned Published Cancelled\nLeaveRequest id, userId, start, end, type, status Pending Approved Rejected, managerComment\nSwapRequest id, fromShiftId, initiatorId, targetUserId, status Proposed Accepted AwaitingApproval Approved Rejected, timeline events\nTimesheet id, userId, periodStart, periodEnd, hoursRegular, hoursOvertime, allowances\nAuditEvent id, actorId, action, entityType, entityId, timestamp, details\nRuleConfig id, name, value, scope clinic or role\n\n### 6.2 Relationships and multiplicities\n\nUser 1..\\* has Role many to many\nUser 0..\\* has Skill many to many\nLocation 1..\\* has ShiftTemplate 1..\\*\nShiftTemplate 1 creates many ShiftInstance\nShiftInstance 0..1 assigned to User as assignee\nUser 0..\\* has LeaveRequest 0..\\*\nSwapRequest references one ShiftInstance and two Users initiator and target\nTimesheet 1 belongs to User and covers many ShiftInstances\nAuditEvent references one actor User and one target entity by id\nRuleConfig applies to Location, Role, or global using scope\n\n### 6.3 Optional class diagram in text Mermaid\n\nYou can paste this into any Mermaid renderer if you want a picture.\n\n```mermaid\nclassDiagram\n  class User { +UUID id +String name +String email }\n  class Role { +UUID id +String name }\n  class Skill { +UUID id +String name }\n  class Location { +UUID id +String name +String timezone }\n  class ShiftTemplate { +UUID id +Time start +Time end }\n  class ShiftInstance { +UUID id +Date date +Status status +UUID assigneeId }\n  class LeaveRequest { +UUID id +DateTime start +DateTime end +Type type +Status status }\n  class SwapRequest { +UUID id +Status status }\n  class Timesheet { +UUID id +Date periodStart +Date periodEnd +Decimal reg +Decimal ot }\n  class AuditEvent { +UUID id +String action +DateTime at }\n  class RuleConfig { +UUID id +String name +String value +String scope }\n\n  User \"1\" -- \"*\" Timesheet\n  User \"*\" -- \"*\" Role\n  User \"*\" -- \"*\" Skill\n  User \"1\" -- \"*\" LeaveRequest\n  User \"1\" -- \"*\" ShiftInstance : assignee\n  ShiftTemplate \"1\" -- \"*\" ShiftInstance\n  Location \"1\" -- \"*\" ShiftTemplate\n  SwapRequest \"*\" --> \"1\" ShiftInstance\n  SwapRequest \"*\" --> \"2\" User : initiator,target\n  AuditEvent \"*\" --> \"1\" User : actor\n```\n\n## 7. CRC cards optional\n\nUser\nResponsibilities authenticate, manage profile, request leaves, propose accept swaps\nCollaborators Role, Skill, ShiftInstance, LeaveRequest, SwapRequest\n\nManager role specializes User\nResponsibilities plan schedule, publish, approve leaves and swaps\nCollaborators ShiftTemplate, ShiftInstance, LeaveRequest, SwapRequest, AuditEvent\n\nShiftTemplate\nResponsibilities define reusable time blocks and role skill requirements\nCollaborators Location, Skill\n\nShiftInstance\nResponsibilities represent a concrete shift on a date, hold assignment and status\nCollaborators User assignee, ShiftTemplate, AuditEvent\n\nLeaveRequest\nResponsibilities represent time off with lifecycle and conflict checks\nCollaborators User, ShiftInstance validation\n\nSwapRequest\nResponsibilities orchestrate initiator target manager approval\nCollaborators User initiator target, ShiftInstance, AuditEvent\n\nTimesheet\nResponsibilities aggregate hours per period and compute overtime\nCollaborators User, ShiftInstance, LeaveRequest\n\nAuditEvent\nResponsibilities immutable record of important actions\nCollaborators User actor, various target entities\n\nRuleConfig\nResponsibilities store clinic rules used by validators\nCollaborators ShiftInstance, ShiftTemplate, validation services\n\n## 8. Acceptance criteria examples\n\nAC-Schedule validation\nGiven a manager assigns a staff member who worked a late shift yesterday\nWhen the assignment would violate minimum rest hours\nThen the system blocks the assignment and shows the exact rule that failed\n\nAC-Swap approval\nGiven a swap accepted by target staff\nWhen manager approves\nThen assignees are swapped, audit event recorded, and both staff receive notifications\n\nAC-Timesheet\nGiven a published schedule and approved leaves in a period\nWhen a timesheet is generated\nThen hours are computed with overtime where weekly threshold exceeded and a CSV export is available\n\n## 9. Glossary\n\nAssignment shift instance with an assignee\nDraft schedule schedule not yet published\nPublished schedule schedule visible to all and change controlled\nEligibility ability to take a shift based on skills, role, leaves, and rules\n\n## 10. Submission checklist mapped to the rubric\n\n• Functional and non-functional requirements fully described sections 3 and 4\n• Use cases designed and based on requirements sections 5 and 8\n• Objects, classes, and relationships identified sections 6 and 7\n• Document ready for upload\n\n## 11. Merge request link placeholder\n\nPaste your MR link here once you push docs and skeleton code.\nExample\nhttps colon slash slash your-git-host slash shiftcraft slash merge\\_requests slash 1\n\n---\n\nIf you want this as a polished pdf or docx with a cover page, say the word and I will generate the file for you immediately.\n\n","structuredPatch":[{"oldStart":1,"oldLines":7,"newStart":1,"newLines":5,"lines":["-nice, let’s lock down Stage 2 for your ShiftCraft project. Below is a complete, ready to submit write-up you can paste into your doc or pdf. It covers full functional and non-functional requirements, a cohesive use case model, and explicit objects, classes, and relationships. I also included CRC cards and text UML so you have optional extras.","+# ShiftCraft - Stage 2 Use Cases and Requirements"," ","-# Stage 2. Capstone Project Use Cases","-"," System: ShiftCraft — staff scheduling and time management for small clinics and labs"," "," ## 1. System overview"]}],"userModified":false,"replaceAll":false}}